# ITU-T G.227 疑似音声発生器の測定器としての使用ガイド

**専用測定器70万円 → WebAudio+DAC 3万円で十分実用的**  
**ブラウザだけで無線機測定・自由にカスタマイズ・今すぐ使える**

## 概要

このWebAudio実装のITU-T G.227疑似音声発生器を実際の測定器として使用するための実用ガイドです。市販のDACと組み合わせることで、無線機特性測定が可能になります。

## 機器選定ガイド

### 推奨DAC

**注記**: ここで推奨するのは、DAC機能を含むUSBオーディオインターフェースやUSBヘッドフォンアンプです。疑似音声発生器では出力機能のみが重要であり、入力機能は使用しません。

#### **推奨機器**

##### **Focusrite Scarlett Solo**
- **DAC THD+N**: -115dB（極めて優秀）
- **ライン出力 THD+N**: -109dB（測定器として十分）
- **周波数特性**: 20-20kHz ± 0.02dB（測定器レベルの精度）
- **ダイナミックレンジ**: 130dB（A特性）
- **最大出力レベル**: 16dBu（バランス出力）
- **価格**: 約2万円
- **特徴**: オーディオIF専業メーカーの高品質DAC、仕様完全公開

##### **ASUS Xonar U7 MKII**
- **DAC THD+N**: -104dB（測定器として十分）
- **S/N比**: 114dB（優秀なノイズ性能）
- **分解能**: 192kHz/24bit（高品質デジタル処理）
- **出力レベル**: 1Vrms（ライン出力）
- **DAC**: Cirrus Logic CS4398/CS4362（信頼性の高い回路）
- **価格**: 約1万円
- **特徴**: PC周辺機器メーカーがDAC仕様を明記、USB接続簡単

##### **TASCAM US-2x2HR**
- **THD+N**: 0.0012% (約-98dB)（測定器として十分）
- **周波数特性**: 20Hz-20kHz +0.2dB/-0.1dB（高精度）
- **S/N比**: 110dB（優秀なノイズ性能）
- **出力レベル**: +4dBu (1.228Vrms)（プロ機器標準）
- **最大出力レベル**: +20dBu (7.746Vrms)（高出力対応）
- **出力インピーダンス**: 210Ω（バランス出力）
- **価格**: ¥21,780（税込）
- **特徴**: オーディオ専業メーカーTASCAM、詳細仕様完全公開

#### **要求仕様（参考）**
- **サンプリング**: 44.1kHz以上対応
- **分解能**: 16bit以上（24bit推奨）
- **出力**: RCA/3.5mmライン出力
- **THD+N**: -100dB以下

### 接続ケーブル・アダプタ

#### **基本接続**
```
┌─────────┐   USB   ┌─────────────┐   Audio Cable   ┌─────────────┐
│   PC    │◄──────►│     DAC     │◄───────────────►│   無線機     │
│(Browser)│         │             │                 │ (マイク入力) │
└─────────┘         └─────────────┘                 └─────────────┘
```

**音量調整**: PC（WebAudio）、DAC出力レベル、無線機マイクゲインで調整

#### **必要ケーブル**
- **TRS-3.5mm ケーブル**: バランス出力のDAC用
- **RCA-3.5mm ケーブル**: アンバランス出力のDAC用  
- **XLR-3.5mm ケーブル**: XLRマイク入力の無線機用（必要に応じて）

#### **音量調整方法**
1. **PC側（WebAudio）**: ブラウザアプリで音量調整
2. **DAC側**: 出力レベル調整（機器による）
3. **無線機側**: マイクゲイン調整

## セットアップ手順

### 1. **DAC接続**
- DACをPCにUSB接続
- OS標準ドライバーで自動認識（通常はドライバー不要）
- オーディオ出力デバイスとしてDACを選択

### 2. **サンプルレート設定**
- **OS側**: 48kHz/24bit に設定（推奨）
- **DAC側**: 48kHz対応を確認
- **ブラウザ**: 自動的にOSの設定を使用

### 3. **ブラウザ設定**
- **Chrome**: AudioWorklet対応（Chrome 67+）
- **Firefox**: AudioWorklet対応（Firefox 76+）

## 校正方法

### **出力レベル校正**

#### **必要機器**
- オシロスコープ または AC電圧計
- 接続ケーブル

#### **手順**
1. **基準信号出力**
   - ブラウザで1000Hz正弦波を選択
   - -20dB 程度で出力

2. **レベル測定**
   - オシロスコープで波形確認
   - 実効値（RMS）を測定・記録
   - 歪みがないことを確認

3. **レベル調整**
   - **PC側（優先度：高）**: ブラウザの音量調整を大きめに設定
   - **DAC側（優先度：中）**: 出力レベル調整（機器による）
   - **無線機側（優先度：低）**: マイクゲインは小さめ、微調整に使用

#### **レベル調整の原則**
- **前段大・後段小**: 信号チェーンの前段で十分なレベルを確保
- **S/N比確保**: PC/DAC段で大きなレベルにして、ノイズ比を下げる
- **歪み回避**: 各段で過大入力による歪みを避ける
- **微調整**: 無線機のマイクゲインは最終調整のみに使用

#### **目標レベル**
- **一般的な無線機**: 10-100mVrms（マイク入力レベル）
- **測定開始**: 適切なレベルで歪みなく動作することを確認
- **記録**: 設定値と実測値を記録（再現性確保）

#### **注意点**
- **歪み確認**: 過大入力で歪まないこと
- **S/N比**: バックグラウンドノイズレベル確認
- **再現性**: 同じ設定で同じレベルが出力されること

## 測定手順

### **SSB送信機の測定例**

#### **準備**
1. 送信機をSSB(USB)モードに設定
2. マイク入力に疑似音声を接続
3. 送信機出力を適切な減衰器を挿入してスペクトラムアナライザーに接続

#### **測定**
1. 疑似音声信号を開始
2. 送信機のPTTを押下
3. スペクトラムアナライザーで占有帯域幅を測定
4. スプリアスを測定

## 注意点・トラブルシューティング

### **グラウンドループ対策**
- **症状**: 50/60Hzハム音
- **対策**: 
  - アイソレーション・トランス使用
  - USB絶縁アダプタ
  - 1点アース

### **RF回り込み対策**
- **症状**: 送信時の音質劣化
- **対策**:
  - フェライトコア装着
  - シールドケーブル使用
  - 物理的距離確保
